(()=>{const e=document.getElementById("textarea"),t=document.getElementById("output"),n=document.getElementById("currentLine");function o(){const e=indexedDB.open("text_editor",1);e.onsuccess=function(){const o=e.result.transaction("entries","readonly").objectStore("entries").get(1);console.log("1"),o.onsuccess=function(){const e=o.result;if(e&&e.content){const o=e.content.split("\n");t.innerHTML="";let d=1;o.forEach((e=>{const n=document.createElement("div");n.classList.add("line"),n.innerHTML=`<span class="line-no">${d}</span><span class="line-content">${e}</span>`,t.appendChild(n),d++,console.log("AA")})),n.textContent=d}}}}indexedDB.open("text_editor",1).onupgradeneeded=function(){indexedDB.open("text_editor",1).result.createObjectStore("entries",{keyPath:"id"})},console.log("Hello, world!"),e.addEventListener("keydown",(function(d){"Enter"===d.key&&(d.preventDefault(),function(d){const c=indexedDB.open("text_editor",1);c.onsuccess=function(){const i=c.result.transaction("entries","readwrite"),s=i.objectStore("entries"),r=s.get(1);t.innerHTML="",e.value="","clear"===d?(s.put({id:1,content:""}),i.oncomplete=function(){console.log("Cleared from IndexedDB"),o(),n.textContent=1}):r.onsuccess=function(){const e=r.result;let t=d;e&&e.content&&(t=e.content+"\n"+d),s.put({id:1,content:t}),i.oncomplete=function(){o(),console.log("Content saved to IndexedDB")}}}}(e.value))})),document.addEventListener("DOMContentLoaded",(function(){e.focus(),o()})),document.getElementById("terminal").addEventListener("click",(function(t){e.focus()})),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),window.deferredPrompt=e,d.style.visibility="visible"}));const d=document.getElementById("installButton");d.addEventListener("click",(async()=>{window.deferredPrompt&&(window.deferredPrompt.preventDefault(),window.deferredPrompt.prompt(),"accepted"===(await window.deferredPrompt.userChoice).outcome?(console.log("User accepted the installation"),d.style.visibility="hidden"):console.log("User dismissed the installation"),window.deferredPrompt=null)}))})();